{% extends 'index.html' %}


{% block content %}
<div class="chat-container">
    <div class="floating-ball open-sidebar">
        <p >Open side component</p>
    </div>
    <div class=" threats-side-component">
        <div class="header">
            <h2>Conversations</h2>
            <button class="hide-sidebar">Close</button>
        </div>
        <div class="options">
            <div>
                <button class="button-gray-coral">New chat</button>
            </div>
            <!-- <div><span >Filter by text:</span>
                <input type="text" class="" />
            </div> -->
        </div>
        <div class="history">
            {% for conversation in conversations %}
            <button>{{conversation.title}}</button>
            {% endfor %}
        </div>
        <!-- <div class="footer">
            <span >User: {{user.username}}</span>
        </div> -->
    </div>
    <div class="playground-component">
        <div class="header">
            <h1 class="font-gradient">Chat</h1>
        </div>
        <div class="chat-input">
            <input type="hidden" id="conversation-id"  value="{{conversation_id}}" />
            <textarea rows=19 id="user-input" class="h-full" type="text"></textarea>
            <button id="submit-btn" class="button-gray-coral">Submit</button>
          </div>
        <div class="chat-tools">
            <label for="agent">Agent:</label>
            <select name="agents" id="agents">
                {% for agent in agents %}
                <option value="{{ agent.id }}"{% if forloop.first %} selected{% endif %}>{{ agent.name }}</option>
                {% endfor %}
            </select>
            <label for="documents">Document:</label>
            <select name="documents" id="documents">
                {% for document in documents %}
                <option value="{{ document.id }}"{% if forloop.first %} selected{% endif %}>{{ document.title }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="chat-messages">
            <div class="message-bubble user-message">hello</div>
            <div class="message-bubble bot-message">Hello Im the bot</div>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}

<script>
 
  </script>

<script>
    // THIS LOGIC WORKS TO SEND DATA TO THE WEBHOOK
    // const chatInput = document.querySelector('.chat-input textarea');
    // const submitButton = document.querySelector('.chat-input button');
    // // attach event listener to button
    // submitButton.addEventListener('click', function() {
    //     const message = { "message": chatInput.value }; // Define the message to send
    //     socket.send(JSON.stringify(message)); // Send the message
    //     chatInput.value = ''; // clear the textarea
    // });
</script>
{% endblock %}